<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>咨询师详情页面测试</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            background-color: #f5f5f5;
        }
        .detail-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .stat-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        .stat-number {
            display: block;
            font-size: 24px;
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 14px;
            color: #666;
        }
        .activity-list {
            margin-top: 10px;
        }
        .activity-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        .activity-icon {
            font-size: 20px;
            margin-right: 12px;
        }
        .activity-content {
            flex: 1;
        }
        .activity-text {
            display: block;
            font-size: 14px;
            color: #333;
            margin-bottom: 4px;
        }
        .activity-time {
            font-size: 12px;
            color: #999;
        }
        .loading {
            color: #999;
            font-style: italic;
        }
        .load-btn {
            background: #1976d2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .load-btn:hover {
            background: #1565c0;
        }
        .loaded {
            color: #4caf50;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <h1>咨询师详情页面 - 加载更多信息演示</h1>
    
    <div class="detail-card">
        <h2 class="section-title">咨询师基本信息</h2>
        <div style="display: flex; align-items: center; margin-bottom: 20px;">
            <div style="margin-right: 20px;">
                <div style="width: 80px; height: 80px; background: #e0e0e0; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                    👤
                </div>
            </div>
            <div>
                <h3 style="margin: 0 0 5px 0;">张心理</h3>
                <p style="margin: 0; color: #666;">高级心理咨询师</p>
                <p style="margin: 5px 0 0 0; color: #999;">ID: 12345 | 从业8年</p>
            </div>
        </div>
    </div>

    <div class="detail-card">
        <h2 class="section-title">
            服务统计信息
            <span id="stats-status" class="loading">等待加载...</span>
        </h2>
        <div class="stats-grid" id="stats-container">
            <div class="stat-item">
                <span class="stat-number" id="total-consultations">--</span>
                <span class="stat-label">总咨询次数</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="completed-consultations">--</span>
                <span class="stat-label">已完成咨询</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="average-rating">--</span>
                <span class="stat-label">平均评分</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="retention-rate">--</span>
                <span class="stat-label">客户留存率</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="this-month">--</span>
                <span class="stat-label">本月咨询</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="response-time">--</span>
                <span class="stat-label">平均响应时间</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="ranking">--</span>
                <span class="stat-label">评分排名</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="revenue">--</span>
                <span class="stat-label">总收入</span>
            </div>
        </div>
        <button class="load-btn" onclick="loadStats()">📊 加载详细统计</button>
    </div>

    <div class="detail-card">
        <h2 class="section-title">
            最近活动
            <span id="activities-status" class="loading">等待加载...</span>
        </h2>
        <div class="activity-list" id="activities-container">
            <div class="activity-item">
                <div class="activity-icon">📝</div>
                <div class="activity-content">
                    <span class="activity-text">基本信息加载完成</span>
                    <span class="activity-time">刚刚</span>
                </div>
            </div>
        </div>
        <button class="load-btn" onclick="loadActivities()">📅 加载活动记录</button>
        <button class="load-btn" onclick="loadReviews()">⭐ 加载客户评价</button>
    </div>

    <script>
        // 模拟 API 调用
        function simulateAPICall(data, delay = 1000) {
            return new Promise(resolve => {
                setTimeout(() => {
                    resolve({
                        success: true,
                        data: data
                    });
                }, delay);
            });
        }

        // 加载统计信息
        async function loadStats() {
            document.getElementById('stats-status').textContent = '加载中...';
            
            try {
                const response = await simulateAPICall({
                    totalConsultations: 256,
                    completedConsultations: 231,
                    averageRating: 4.8,
                    clientRetentionRate: 85,
                    thisMonthConsultations: 23,
                    responseTime: 2.5,
                    totalRevenue: 28500,
                    ranking: 5
                });

                if (response.success) {
                    const stats = response.data;
                    document.getElementById('total-consultations').textContent = stats.totalConsultations;
                    document.getElementById('completed-consultations').textContent = stats.completedConsultations;
                    document.getElementById('average-rating').textContent = stats.averageRating;
                    document.getElementById('retention-rate').textContent = stats.clientRetentionRate + '%';
                    document.getElementById('this-month').textContent = stats.thisMonthConsultations;
                    document.getElementById('response-time').textContent = stats.responseTime + 'h';
                    document.getElementById('ranking').textContent = '第' + stats.ranking + '名';
                    document.getElementById('revenue').textContent = '¥' + stats.totalRevenue;
                    
                    document.getElementById('stats-status').textContent = '✅ 已加载';
                    document.getElementById('stats-status').className = 'loaded';
                }
            } catch (error) {
                document.getElementById('stats-status').textContent = '❌ 加载失败';
            }
        }

        // 加载活动记录
        async function loadActivities() {
            document.getElementById('activities-status').textContent = '加载中...';
            
            try {
                const response = await simulateAPICall([
                    {
                        id: 1,
                        type: 'consultation',
                        description: '完成了一次心理咨询 - 焦虑情绪疏导',
                        time: '2小时前'
                    },
                    {
                        id: 2,
                        type: 'login',
                        description: '登录系统，更新在线状态',
                        time: '4小时前'
                    },
                    {
                        id: 3,
                        type: 'completion',
                        description: '完成认知行为治疗疗程',
                        time: '1天前'
                    }
                ]);

                if (response.success) {
                    const activities = response.data;
                    const container = document.getElementById('activities-container');
                    
                    activities.forEach(activity => {
                        const activityElement = document.createElement('div');
                        activityElement.className = 'activity-item';
                        activityElement.innerHTML = `
                            <div class="activity-icon">${getActivityIcon(activity.type)}</div>
                            <div class="activity-content">
                                <span class="activity-text">${activity.description}</span>
                                <span class="activity-time">${activity.time}</span>
                            </div>
                        `;
                        container.appendChild(activityElement);
                    });
                    
                    document.getElementById('activities-status').textContent = '✅ 已加载活动记录';
                    document.getElementById('activities-status').className = 'loaded';
                }
            } catch (error) {
                document.getElementById('activities-status').textContent = '❌ 加载失败';
            }
        }

        // 加载客户评价
        async function loadReviews() {
            try {
                const response = await simulateAPICall([
                    {
                        id: 1,
                        rating: 5,
                        comment: '张老师很专业，帮助我很大',
                        time: '3天前'
                    },
                    {
                        id: 2,
                        rating: 4,
                        comment: '咨询效果不错，态度很好',
                        time: '1周前'
                    }
                ]);

                if (response.success) {
                    const reviews = response.data;
                    const container = document.getElementById('activities-container');
                    
                    reviews.forEach(review => {
                        const reviewElement = document.createElement('div');
                        reviewElement.className = 'activity-item';
                        reviewElement.innerHTML = `
                            <div class="activity-icon">⭐</div>
                            <div class="activity-content">
                                <span class="activity-text">收到 ${review.rating} 星评价: "${review.comment}"</span>
                                <span class="activity-time">${review.time}</span>
                            </div>
                        `;
                        container.appendChild(reviewElement);
                    });
                }
            } catch (error) {
                console.error('加载客户评价失败:', error);
            }
        }

        // 获取活动图标
        function getActivityIcon(type) {
            switch (type) {
                case 'login': return '🟢';
                case 'consultation': return '💬';
                case 'completion': return '✅';
                case 'update_profile': return '✏️';
                default: return '📝';
            }
        }

        // 页面加载完成后自动演示
        window.onload = function() {
            // 3秒后自动开始加载演示
            setTimeout(() => {
                console.log('开始自动演示加载过程...');
                loadStats();
                
                setTimeout(() => {
                    loadActivities();
                }, 2000);
                
                setTimeout(() => {
                    loadReviews();
                }, 4000);
            }, 1000);
        };
    </script>
</body>
</html>
